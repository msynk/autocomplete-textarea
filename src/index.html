<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GhostTextarea</title>
</head>

<body>
    <script src="./ghost-textarea.js"></script>
    <ghost-textarea placeholder="Type here..." value="this is value"></ghost-textarea>
    <hr />
    <script>
        const suggestions = [
            'application form',
            'banana smoothie',
            'car repair manual',
            'dog training guide'
        ];

        const gta = document.querySelector('ghost-textarea');

        gta.addEventListener('input', (e) => {
            console.log('input:', `[${gta.value}]`, e);

            const value = gta.value;
            if (!value) {
                return gta.ghost = '';
            }

            const lastWord = value.split(/\s+/).pop();
            if (!lastWord) {
                return gta.ghost = '';
            }

            const match = suggestions.find(item => item.toLowerCase().startsWith(lastWord.toLowerCase()));

            gta.ghost = match ? match.slice(lastWord.length) : '';
        });

        gta.addEventListener('blur', (e) => {
            console.log('blur:', `[${gta.value}]`, e);
        });
    </script>
</body>

</html>